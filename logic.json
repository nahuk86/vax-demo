{
  "meta": {
    "market": "US",
    "assessment_id": "respiratory_vaccines_demo",
    "version": "2025-01-01",
    "language": "en-US"
  },
  "questions": [
    {
      "id": "q_age",
      "type": "number",
      "label": "How old are you?",
      "min": 18,
      "max": 120,
      "required": true
    },
    {
      "id": "q_pregnant",
      "type": "single_choice",
      "label": "Are you currently pregnant or planning to become pregnant in the next few months?",
      "required": true,
      "options": [
        { "value": "yes", "label": "Yes" },
        { "value": "no", "label": "No" },
        { "value": "not_sure", "label": "Not sure" },
        { "value": "not_applicable", "label": "This question does not apply to me" }
      ]
    },
    {
      "id": "q_conditions",
      "type": "multi_choice",
      "label": "Have you ever been told by a healthcare provider that you have any of the following health conditions?",
      "help_text": "Select all that apply.",
      "options": [
        { "value": "heart_disease", "label": "Heart disease" },
        {
          "value": "lung_disease",
          "label": "Chronic lung disease (such as COPD or severe asthma)"
        },
        { "value": "diabetes", "label": "Diabetes" },
        { "value": "kidney_disease", "label": "Chronic kidney disease" },
        { "value": "weak_immune", "label": "Weakened immune system" },
        { "value": "none", "label": "None of the above" }
      ]
    },
    {
      "id": "q_ltc",
      "type": "single_choice",
      "label": "Do you currently live in a nursing home or other long-term care facility?",
      "required": true,
      "options": [
        { "value": "yes", "label": "Yes" },
        { "value": "no", "label": "No" }
      ]
    },
    {
      "id": "q_recent_vaccines",
      "type": "multi_choice",
      "label": "Have you recently received any of the following respiratory vaccines?",
      "help_text": "Select all that apply, or \"None of the above\".",
      "options": [
        { "value": "covid19", "label": "COVID-19 vaccine" },
        { "value": "flu", "label": "Flu (influenza) vaccine" },
        { "value": "pneumo", "label": "Pneumococcal (pneumonia) vaccine" },
        { "value": "rsv", "label": "RSV vaccine" },
        { "value": "none", "label": "None of the above / I am not sure" }
      ]
    }
  ],
  "variable_mapping": {
    "age": {
      "from_question": "q_age",
      "type": "number"
    },
    "is_pregnant": {
      "from_question": "q_pregnant",
      "type": "boolean",
      "true_when": ["yes"]
    },
    "has_chronic_condition": {
      "from_question": "q_conditions",
      "type": "boolean",
      "true_when_any_of": [
        "heart_disease",
        "lung_disease",
        "diabetes",
        "kidney_disease",
        "weak_immune"
      ]
    },
    "lives_in_ltc": {
      "from_question": "q_ltc",
      "type": "boolean",
      "true_when": ["yes"]
    },
    "has_recent_covid19_vaccine": {
      "from_question": "q_recent_vaccines",
      "type": "boolean",
      "true_when_any_of": ["covid19"]
    },
    "has_recent_flu_vaccine": {
      "from_question": "q_recent_vaccines",
      "type": "boolean",
      "true_when_any_of": ["flu"]
    },
    "has_recent_pneumo_vaccine": {
      "from_question": "q_recent_vaccines",
      "type": "boolean",
      "true_when_any_of": ["pneumo"]
    },
    "has_recent_rsv_vaccine": {
      "from_question": "q_recent_vaccines",
      "type": "boolean",
      "true_when_any_of": ["rsv"]
    }
  },
  "rules": {
    "vaccines": [
      {
        "id": "covid19",
        "label": "COVID-19 vaccine",
        "description": "Demo-only logic for potential COVID-19 vaccine eligibility.",
        "eligibility": {
          "logic": "OR",
          "groups": [
            {
              "logic": "AND",
              "conditions": [
                { "var": "age", "op": ">=", "value": 65 }
              ]
            },
            {
              "logic": "AND",
              "conditions": [
                { "var": "age", "op": ">=", "value": 18 },
                { "var": "has_chronic_condition", "op": "==", "value": true }
              ]
            }
          ]
        },
        "output": {
          "eligible_message_key": "covid19_eligible",
          "not_eligible_message_key": "covid19_not_eligible",
          "cta_type": "see_locations"
        }
      },
      {
        "id": "flu",
        "label": "Flu (influenza) vaccine",
        "description": "Demo-only logic for potential flu vaccine eligibility.",
        "eligibility": {
          "logic": "OR",
          "groups": [
            {
              "logic": "AND",
              "conditions": [
                { "var": "age", "op": ">=", "value": 65 }
              ]
            },
            {
              "logic": "AND",
              "conditions": [
                { "var": "age", "op": ">=", "value": 50 },
                { "var": "has_chronic_condition", "op": "==", "value": true }
              ]
            }
          ]
        },
        "output": {
          "eligible_message_key": "flu_eligible",
          "not_eligible_message_key": "flu_not_eligible",
          "cta_type": "see_locations"
        }
      },
      {
        "id": "pneumo",
        "label": "Pneumococcal (pneumonia) vaccine",
        "description": "Demo-only logic for potential pneumococcal vaccine eligibility.",
        "eligibility": {
          "logic": "OR",
          "groups": [
            {
              "logic": "AND",
              "conditions": [
                { "var": "age", "op": ">=", "value": 65 }
              ]
            },
            {
              "logic": "AND",
              "conditions": [
                { "var": "age", "op": ">=", "value": 19 },
                { "var": "has_chronic_condition", "op": "==", "value": true }
              ]
            },
            {
              "logic": "AND",
              "conditions": [
                { "var": "lives_in_ltc", "op": "==", "value": true }
              ]
            }
          ]
        },
        "output": {
          "eligible_message_key": "pneumo_eligible",
          "not_eligible_message_key": "pneumo_not_eligible",
          "cta_type": "see_locations"
        }
      },
      {
        "id": "rsv",
        "label": "RSV vaccine",
        "description": "Demo-only logic for potential RSV vaccine eligibility.",
        "eligibility": {
          "logic": "OR",
          "groups": [
            {
              "logic": "AND",
              "conditions": [
                { "var": "age", "op": ">=", "value": 60 }
              ]
            },
            {
              "logic": "AND",
              "conditions": [
                { "var": "age", "op": ">=", "value": 18 },
                { "var": "has_chronic_condition", "op": "==", "value": true }
              ]
            }
          ]
        },
        "output": {
          "eligible_message_key": "rsv_eligible",
          "not_eligible_message_key": "rsv_not_eligible",
          "cta_type": "see_locations"
        }
      }
    ]
  },
  "messages": {
    "covid19_eligible": {
      "title": "You may be eligible for a COVID-19 vaccine.",
      "body": "Based on this demo logic, you might be eligible for a COVID-19 vaccine option. Talk to a healthcare professional to confirm what is right for you."
    },
    "covid19_not_eligible": {
      "title": "You may not be in a group prioritized in this demo.",
      "body": "This tool is for demonstration only and does not replace medical advice. A healthcare professional can give you vaccine recommendations that fit your situation."
    },
    "flu_eligible": {
      "title": "You may be eligible for a flu (influenza) vaccine.",
      "body": "Based on this demo logic, you might be eligible for a flu vaccine option. Talk to a healthcare professional to confirm what is right for you."
    },
    "flu_not_eligible": {
      "title": "You may not be in a group prioritized in this demo.",
      "body": "This tool is for demonstration only and does not replace medical advice. A healthcare professional can give you vaccine recommendations that fit your situation."
    },
    "pneumo_eligible": {
      "title": "You may be eligible for a pneumococcal (pneumonia) vaccine.",
      "body": "Based on this demo logic, you might be eligible for a pneumococcal vaccine option. Talk to a healthcare professional to confirm what is right for you."
    },
    "pneumo_not_eligible": {
      "title": "You may not be in a group prioritized in this demo.",
      "body": "This tool is for demonstration only and does not replace medical advice. A healthcare professional can give you vaccine recommendations that fit your situation."
    },
    "rsv_eligible": {
      "title": "You may be eligible for an RSV vaccine.",
      "body": "Based on this demo logic, you might be eligible for an RSV vaccine option. Talk to a healthcare professional to confirm what is right for you."
    },
    "rsv_not_eligible": {
      "title": "You may not be in a group prioritized in this demo.",
      "body": "This tool is for demonstration only and does not replace medical advice. A healthcare professional can give you vaccine recommendations that fit your situation."
    }
  }
}
